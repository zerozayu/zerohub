# ZEROHUB

## 1.信息聚合

### 1.1. 文件解析存储方式
1. ingest-attachment 

    逻辑很简单，整个管道，你把你的pdf/doc什么的给转成base64，然后通过管道把base64传进去，es会把所有的东西给你安排好，会自动解析相应的日期、作者等相关信息.

   (1) 优点:
   1. 安装方便，只需要下载zip安装包，调用elasticsearch本身自带的安装模块即可
   2. 使用方便，编辑一条管道抽取命令，可以直接利用linux的base64命令转码存入elasticsearch中
   3. 支持的格式比较多，支持ppt，pdf，doc，docx，xls等office常用的办公软件格式导入到elasticsearch当中。
   4. 导入后的文档可以直接输入中文进行检索

   (2) 缺点:
   1. 大文件支持不够，如果超过100M的pdf，base64转码将比较缓慢，并且，存入到elasticsearch中的数据也十分庞大
   2. 必须要将文件下载到本地，然后必须进行base64转码才可以存到elasticsearch中，等于说，必须要实体文件，因为需要base64转码，如果文件在对象存储/云上，那就不可以这么操作了
   3. 对于pdf，doc中含有图片的情况，没有办法将图片中文文字识别出来，而且如果出现图片较多的情况，转码较慢，含有特殊字符的base64码导入也会无法识别。

> **使用场景**
> 
> ingest-attachment插件的使用场景
> - 存储的文件不那么大的情况
> - 存储的文件大部分都是纯文字的情况
> - 存储的文件全文搜索精准度要求不那么高

---

2. fscrawler服务

   一个类似filebeat的监控服务，监控某个文件夹下面的文档，定时去遍历一次，如果发现了新添加的文档则会直接写入到elasticsearch当中。


---
- 文件搜索实现方式
  - 监听固定路径,触发相应任务存储到 es 库
  - 直接存储到 es 库中,




### 2. todo
1. application-prod.yml
2. 